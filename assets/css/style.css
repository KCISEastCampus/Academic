/* Strong overrides to ensure backgrounds switch when theme changes (override third-party CSS) */
html[data-bs-theme="light"] body,
html[data-bs-theme="light"] .container,
html[data-bs-theme="light"] header,
html[data-bs-theme="light"] main,
html[data-bs-theme="light"] footer {
  background-color: var(--bg) !important;
  color: var(--text) !important;
}

html[data-bs-theme="light"] .card,
html[data-bs-theme="light"] .card .card-body,
html[data-bs-theme="light"] .subject-card,
html[data-bs-theme="light"] pre,
html[data-bs-theme="light"] .highlight {
  background: var(--surface) !important;
  border-color: rgba(0,0,0,0.08) !important;
  color: var(--text) !important;
}

/* Default (rest) state keep transparent in light mode, but allow :hover/:focus to override */
html[data-bs-theme="light"] .exam-link:not(:hover):not(:focus),
html[data-bs-theme="light"] .subject-list .btn:not(:hover):not(:focus) {
  background: transparent;
  color: inherit;
}

/* Dark explicit overrides too (in case third-party CSS forces light backgrounds) */
html[data-bs-theme="dark"] body,
html[data-bs-theme="dark"] .container,
html[data-bs-theme="dark"] header,
html[data-bs-theme="dark"] main,
html[data-bs-theme="dark"] footer {
  background-color: var(--bg) !important;
  color: var(--text) !important;
}

html[data-bs-theme="dark"] .card,
html[data-bs-theme="dark"] .card .card-body,
html[data-bs-theme="dark"] .subject-card,
html[data-bs-theme="dark"] pre,
html[data-bs-theme="dark"] .highlight {
  background: var(--surface) !important;
  border-color: rgba(255,255,255,0.04) !important;
  color: var(--text) !important;
}

html {
  font-size: 20px;
}
body {
  background-color: var(--bg);
  color: var(--text);
  line-height: 1.6;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.container { max-width: var(--container-max); }

/* Subjects wrapper: grid to keep two columns aligned even when item counts differ */
.subjects-wrapper { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; align-items: start; }
.subjects-wrapper > .flex-fill { display:flex; flex-direction:column; gap:.5rem; }

@media (max-width: 767px) {
  .subjects-wrapper { grid-template-columns: 1fr; }
}

/* Card / surface */
.card { background: var(--surface); border: 1px solid rgba(255,255,255,0.03); border-radius: var(--radius); color: var(--text); }
.card .card-title { color: var(--text); }

/* Headings: tighter scale and nicer weight */
h1, .display-4 { font-weight: 700; letter-spacing: -0.01em; }
h2, h3 { font-weight: 600; }

/* Make subject buttons a little more prominent and consistent */
.subject-list .btn { padding: .65rem 1.15rem; font-size: 1.05rem; border-radius: 0.6rem; }

/* Ensure accessible focus rings */
a:focus-visible, button:focus-visible, .btn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 4px rgba(var(--focus-ring), 0.18);
  border-radius: 0.6rem;
}

/* Theme toggle button visibility */
#theme_button {
  background: rgba(255,255,255,0.03);
  padding: .35rem .45rem;
  border-radius: 0.6rem;
  transition: background-color 160ms ease, color 160ms ease;
}
html[data-bs-theme="light"] #theme_button { background: rgba(0,0,0,0.04); }
html[data-bs-theme="dark"] #theme_button { background: rgba(255,255,255,0.02); }

/* Tables: ensure header text follows theme and has readable background/border */
table thead th, .table thead th, .table th {
  color: var(--text) !important;
  background: transparent;
  border-bottom: 1px solid rgba(0,0,0,0.06);
}

/* Light theme: darker header text and subtle surface behind headers */
html[data-bs-theme="light"] table thead th,
html[data-bs-theme="light"] .table thead th,
html[data-bs-theme="light"] .table th {
  color: var(--text) !important;
  background: #eef4fb; /* clearer light header surface */
  border-bottom-color: rgba(0,0,0,0.12) !important;
  padding: 0.9rem 1rem;
  font-weight: 600;
}

/* Dark theme: lighter header text and subtle highlight */
html[data-bs-theme="dark"] table thead th,
html[data-bs-theme="dark"] .table thead th,
html[data-bs-theme="dark"] .table th {
  color: var(--text) !important;
  background: rgba(255,255,255,0.03);
  border-bottom-color: rgba(255,255,255,0.08) !important;
  padding: 0.9rem 1rem;
  font-weight: 600;
}

/* Make table rows slightly separated from header in both themes (no-op placeholder removed) */

/* Buttons: improved outlines and focus */
.btn { border-radius: 0.45rem; }
.btn-outline-success {
  /* default */
  --bs-btn-color: var(--accent-al);
  --bs-btn-border-color: var(--accent-al);
  /* hover */
  --bs-btn-hover-color: #fff;
  --bs-btn-hover-bg: var(--accent-al);
  --bs-btn-hover-border-color: var(--accent-al);
  /* active */
  --bs-btn-active-color: #fff;
  --bs-btn-active-bg: var(--accent-al);
  --bs-btn-active-border-color: var(--accent-al);
  /* disabled */
  --bs-btn-disabled-color: var(--accent-al);
  --bs-btn-disabled-bg: transparent;
  --bs-btn-disabled-border-color: var(--accent-al);
}
.btn-outline-primary {
  --bs-btn-color: var(--accent-ig);
  --bs-btn-border-color: var(--accent-ig);
  --bs-btn-hover-color: #fff;
  --bs-btn-hover-bg: var(--accent-ig);
  --bs-btn-hover-border-color: var(--accent-ig);
  --bs-btn-active-color: #fff;
  --bs-btn-active-bg: var(--accent-ig);
  --bs-btn-active-border-color: var(--accent-ig);
  --bs-btn-disabled-color: var(--accent-ig);
  --bs-btn-disabled-bg: transparent;
  --bs-btn-disabled-border-color: var(--accent-ig);
}
.btn-outline-info {
  --bs-btn-color: var(--info);
  --bs-btn-border-color: var(--info);
  --bs-btn-hover-color: #fff;
  --bs-btn-hover-bg: var(--info);
  --bs-btn-hover-border-color: var(--info);
  --bs-btn-active-color: #fff;
  --bs-btn-active-bg: var(--info);
  --bs-btn-active-border-color: var(--info);
  --bs-btn-disabled-color: var(--info);
  --bs-btn-disabled-bg: transparent;
  --bs-btn-disabled-border-color: var(--info);
}
.btn-outline-secondary { color: var(--muted); border-color: rgba(150,150,150,0.12); }
.btn:focus { outline: 3px solid rgba(255,255,255,0.06); outline-offset: 2px; }

/* Exam link */
.exam-link { display: inline-flex; align-items: center; gap: .6rem; padding: .6rem .9rem; }
.exam-icon { font-size: 1.25rem; }

/* Code and highlighting */
.highlight, pre { background: var(--surface); border-radius: .5rem; padding: .8rem; overflow: auto; color: var(--text); }

/* Focus states for keyboard navigation */
a:focus, button:focus { box-shadow: 0 0 0 3px rgba(100,150,255,0.08); }

/* Responsive tweaks */
@media (max-width: 767px) {
  html { font-size: 18px; }
  .display-4 { font-size: 1.8rem; }
  .d-flex.flex-column.flex-md-row { flex-direction: column !important; }
}

/* Skip link for accessibility */
.skip-link { position: absolute; left: -999px; top: auto; width: 1px; height: 1px; overflow: hidden; }
.skip-link:focus, .sr-only-focusable:focus { position: static; left: 0; width: auto; height: auto; padding: .5rem .75rem; background: rgba(255,255,255,0.06); color: var(--text); border-radius: .25rem; z-index: 9999; }

/* MathJax Enhanced Styling */
.MathJax {
  outline: 0 !important;
  color: var(--text) !important;
  font-size: 1.05em !important;
}

/* Display math styling */
.MathJax_Display {
  margin: 1.5rem 0 !important;
  text-align: center !important;
}

/* Theme-aware MathJax colors */
html[data-bs-theme="dark"] .MathJax {
  color: #e0e0e0 !important;
}

html[data-bs-theme="light"] .MathJax {
  color: #212529 !important;
}

/* Inline math alignment */
.MathJax {
  vertical-align: baseline !important;
}

/* Responsive math */
@media (max-width: 768px) {
  .MathJax {
    font-size: 1em !important;
  }
  
  .MathJax_Display {
    margin: 1rem 0 !important;
  }
}

code>* {
  font-family: 'MapleMono', 'Courier New', Courier, monospace !important;
  line-height: 0;
  white-space: break-spaces;
}

/* Make Bootstrap Icons inherit text color so they respond to hover/active states; avoid overriding inline SVGs like the GitHub corner */
.bi, .bi * {
  color: currentColor !important;
  fill: currentColor !important;
}

code.language-plaintext {
  margin: 0;
  padding: .2em .4em;
  border-radius: 0.5rem;
  background-color: var(--surface);
  color: var(--text);
}

div.highlight {
  margin-top: 1rem;
  padding: 1rem;
  border-radius: 0.5rem;
}

/* .bg-al { */
/*   background-color: var(--al-color); */
/* } */
/**/
/* .bg-ig { */
/*   background-color: var(--ig-color); */
/* } */
/**/
/* .btn-outline-al { */
/*   --bs-btn-color: var(--al-color); */
/*   --bs-btn-border-color: var(--al-color); */
/*   --bs-btn-hover-color: #fff; */
/*   --bs-btn-hover-bg: var(--al-color); */
/*   --bs-btn-hover-border-color: var(--al-color); */
/*   --bs-btn-focus-shadow-rgb: 13, 110, 253; */
/*   --bs-btn-active-color: #fff; */
/*   --bs-btn-active-bg: var(--al-color); */
/*   --bs-btn-active-border-color: var(--al-color); */
/*   --bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125); */
/*   --bs-btn-disabled-color: var(--al-color); */
/*   --bs-btn-disabled-bg: transparent; */
/*   --bs-btn-disabled-border-color: var(--al-color); */
/*   --bs-gradient: none; */
/* } */
/**/
/* .btn-outline-ig { */
/*   --bs-btn-color: var(--ig-color); */
/*   --bs-btn-border-color: var(--ig-color); */
/*   --bs-btn-hover-color: #fff; */
/*   --bs-btn-hover-bg: var(--ig-color); */
/*   --bs-btn-hover-border-color: var(--ig-color); */
/*   --bs-btn-focus-shadow-rgb: 13, 110, 253; */
/*   --bs-btn-active-color: #fff; */
/*   --bs-btn-active-bg: var(--ig-color); */
/*   --bs-btn-active-border-color: var(--ig-color); */
/*   --bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125); */
/*   --bs-btn-disabled-color: var(--ig-color); */
/*   --bs-btn-disabled-bg: transparent; */
/*   --bs-btn-disabled-border-color: var(--ig-color); */
/*   --bs-gradient: none; */
/* } */
/**/
/* .text-al { */
/*   color: var(--al-color); */
/* } */
/**/
/* .text-ig { */
/*   color: var(--ig-color); */
/* } */

/* Subject list: wrap into rows and maintain spacing */
.subject-list { display: flex; flex-wrap: wrap; gap: .5rem; align-items: center; }
.subject-list .btn { margin: 0; }
.subject-card { background: var(--surface); padding: .6rem; border-radius: .45rem; }

@media (min-width: 768px) {
  .subject-list { gap: .75rem; }
}
